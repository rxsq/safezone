<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CrossFire NCR</title>
    <!-- Bootstrap Icons link -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <!-- Bootstrap link -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../assets/css/style.css">
</head>

<body>
    <div class="sidebar" id="sidebar">
        <div class="logo-content">
            <div class="logo">
                <a href="index.html">
                    <img src="../assets/images/crossfire_logo_edited.png" alt="Logo for CrossFire Niagara">
                </a>
            </div>
            <i class="bi bi-list" id="btn-close"></i>
        </div>
        <div class="notification-container">
            <button id="notificationBell" class="btn" data-bs-toggle="modal" data-bs-target="#notificationModal">
                <i class="bi bi-bell"></i> 
                <span id="notificationCount" class="badge bg-danger"></span>
            </button>
        </div>
        <ul class="nav-list">
            <li>
                <a href="index.html"  data-bs-toggle="tooltip" title="Dashboard">
                    <i class="bi bi-speedometer2"></i>
                    <span class="links-name">Dashboard</span>
                </a>
            </li>
            <li id="create-ncr-nav" style="display:none;">
                <a href="non-conformance-report.html" data-bs-toggle="tooltip" title="Create NCR" id="createNCRLink">
                    <i class="bi bi-file-earmark-plus"></i>
                    <span class="links-name">Create NCR</span>
                </a>
            </li>
            <li>
                <a href="ncr-log.html" data-bs-toggle="tooltip" title="NCR Log">
                    <i class="bi bi-card-list"></i>
                    <span class="links-name">NCR Log</span>
                </a>
            </li>
            <li>
                <a href="ncr-data.html" data-bs-toggle="tooltip" title="NCR Data">
                    <i class="bi bi-bar-chart"></i>
                    <span class="links-name">NCR Data</span>
                </a>
            </li>
            <li>
                <a href="product.html" data-bs-toggle="tooltip" title="Products">
                    <i class="bi bi-box-seam"></i>
                    <span class="links-name">Products</span>
                </a>
            </li>
            <li id="employees-nav"  style="display: none;">
                <a href="Employee.html" data-bs-toggle="tooltip" title="Employees">
                    <i class="bi bi-people"></i>
                    <span class="links-name">Employees</span>
                </a>
            </li>
            <li>
                <a href="supplier.html" data-bs-toggle="tooltip" title="Supplier">
                    <i class="bi bi-truck"></i>
                    <span class="links-name">Suppliers</span>
                </a>
            </li>
        </ul>
        <div class="profile-content">
            <div class="profile">
                <div class="profile-details">
                    <img src="/assets/images/crossfire_logo.PNG" alt="Logo for CrossFire Niagara">
                    <div class="name-job">
                        <div class="name">CrossFire Niagara</div>
                        <div class="job">Admin</div>
                    </div>
                </div>
                <i class="bi bi-box-arrow-left" id="log-out"></i>
            </div>
        </div>
    </div>
    <div class="home-content">
        <div>
            <header>
                <h1>NCR Log</h1>
                <div class="actions">
                    <button class="new-ncr-btn" id="new-ncr-btn" onclick="location.href='non-conformance-report.html'" style="display:none;">+ New NCR</button>
                    <!-- <div class="date-range-container">
                        <select class="date-range-selector" id="date-range-selector">
                            <option value="" selected disabled>Date Range</option>
                            <option value="7-days">Last 7 Days</option>
                            <option value="30-days">Last 30 Days</option>
                            <option value="custom">Custom Range</option>
                        </select>
                        <div id="custom-range-container" style="display: none;">
                            <label for="start-date">Start Date:</label>
                            <input type="date" id="start-date">
                            <label for="end-date">End Date:</label>
                            <input type="date" id="end-date">
                            <button id="submit-custom-date" class="filter-btn">Filter Date Range</button>
                        </div>
                    </div> -->
                    <button class="back-to-dashboard-btn" onclick="window.location.href='index.html'">Back to Dashboard</button>
                </div>
            </header>

            <section class="ncr-trends">
                <h2>Filter</h2>
                 <form id="ncrFilterForm">
                    <div class="two-column">
                        <div class="form-group">
                            <label for="filterSupplier" class="form-label">Supplier</label>
                            <select id="supplier-name" name="supplier-name" class="form-select">
                                <option value="-1" disabled selected>Select a Supplier</option>
                            </select>
                        </div>
                        <!-- <div class="form-group">
                            <label for="filterProduct" class="form-label">Product</label>
                            <select id="po-prod-no" name="po-prod-no">
                                <option value="-1" disabled selected>Select a Product</option>
                            </select>
                        </div> -->
                        <div class="form-group">
                            <label for="filterStatus" class="form-label">Stage</label>
                            <select id="status" name="status" class="form-select">
                                <option value="" disabled selected>Select a Stage</option>
                                <option value="QUA">Quality</option>
                                <option value="ENG">Engineering</option>
                                <option value="PUR">Purchasing</option>
                                <option value="ARC">Archived</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterOpenStatus" class="form-label">Status</label>
                            <select id="openStatus" name="openStatus" class="form-select">
                                <option value="" disabled selected>Select a Status</option>
                                <option value="1">Open</option>
                                <option value="2">Closed</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterIssueDate" class="form-label">Issue Date</label>
                            <input type="date" class="form-control" id="filterIssueDate">
                        </div>
                    </div>
                    <div class="filter-buttons">
                        <button type="button" class="filter-btn" id="filter-btn">Apply Filters</button>
                        <button type="reset" class="reset-btn" id="reset-filter-btn">Reset</button>
                    </div>
                </form> 
                <table class="table table-striped table-hover" id="ncrRecentTable">
                    <thead>
                        <tr>
                            <th><a href="#">NCR Number</a></th>
                            <th><a href="#">Supplier</a></th>
                            <th><a href="#">Issue Date</a></th>
                            <th><a href="#">Stage</a></th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tbodyRecentNCR">

                    </tbody>
                </table>
            </section>

            <div id="pagination-controls" class="pagination-container">

            </div>
            
            <div id="page-number" class="page-number"></div>
        </div>

    </div>

    <!-- Delete Modal -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Are you sure?</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="deleteModalBody">

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"
                        id="btnDeleteYes">Yes</button>
                    <button type="button" class="btn btn-primary" id="btnDeleteNo">No</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit NCR Record</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="editForm" class="edit-form">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="editFormNo" class="form-label">Form No</label>
                                <input type="text" class="form-control" id="editFormNo" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="editDocumentNo" class="form-label">Document No</label>
                                <input type="text" class="form-control" id="editDocumentNo" required readonly>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="editDescription" class="form-label">Description</label>
                            <input type="text" class="form-control" id="editDescription" required>
                        </div>
                        <div class="mb-3">
                            <label for="editIssueDate" class="form-label">Issue Date</label>
                            <input type="datetime-local" class="form-control" id="editIssueDate" required>
                        </div>
                        <div class="mb-3">
                            <label for="editImageFileName" class="form-label">Image File Name</label>
                            <input type="text" class="form-control" id="editImageFileName" required>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="editProduct" class="form-label">Product</label>
                                <select class="form-control" id="editProduct" required>
                                    <option value="" disabled selected>Select Product</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="editSalesOrderNo" class="form-label">Sales Order No</label>
                                <input type="number" class="form-control" id="editSalesOrderNo" required>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="editQtyReceived" class="form-label">Quantity Received</label>
                                <input type="number" class="form-control" id="editQtyReceived" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="editQtyDefective" class="form-label">Quantity Defective</label>
                                <input type="number" class="form-control" id="editQtyDefective" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="editDefectDesc" class="form-label">Defect Description</label>
                            <textarea class="form-control" id="editDefectDesc" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="editStatusID" class="form-label">Status ID</label>
                            <select class="form-select" id="editStatusID" required>
                                <option value="" disabled selected>Select Status</option>
                                <option value="OPEN">Active</option>
                                <option value="CLSD">Inactive</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="editSupplier" class="form-label">Supplier</label>
                            <select class="form-control" id="editSupplier" required>
                                <option value="" disabled selected>Select Supplier</option>
                            </select>
                        </div>
                        <input type="hidden" id="editNcrFormNo"> <!-- Hidden input to store the NCR Form No -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="btnSaveChanges">Save Changes</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Modal -->
    <div class="modal fade" id="viewModal" tabindex="-1" aria-labelledby="viewModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewModalLabel">NCR Record Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="viewModalContent">
                        <p><strong>Form No:</strong> <span id="viewFormNo"></span></p>
                        <p><strong>Document No:</strong> <span id="viewDocumentNo"></span></p>
                        <p><strong>Supplier Name:</strong> <span id="viewSupplierName"></span></p>
                        <p><strong>Product:</strong> <span id="viewProdID"></span></p>
                        <p><strong>Description:</strong> <span id="viewDescription"></span></p>
                        <p><strong>Issue Date:</strong> <span id="viewIssueDate"></span></p>
                        <p><strong>Sales Order No:</strong> <span id="viewSalesOrderNo"></span></p>
                        <p><strong>Quantity Received:</strong> <span id="viewQtyReceived"></span></p>
                        <p><strong>Quantity Defective:</strong> <span id="viewQtyDefective"></span></p>
                        <p><strong>Defect Description:</strong> <span id="viewDefectDesc"></span></p>
                        <p><strong>Image:</strong> <span id="viewImageFileName"></span></p>
                        <p><strong>Status:</strong> <span id="viewStatusID"></span></p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <script src="../assets/js/main/sidebar.js"></script>
    <script src="../assets/js/main/inject-notification-modal.js"></script>
    <script src="../assets/js/main/notification-handling.js"></script>
    <script src="../assets/js/ncr-log/handle-data.js"></script>
    <script src="../assets/js/ncr-log/filter-data.js"></script>
    <script src="../assets/js/main/user-role-handling.js"></script>
    <!-- <script src="../assets/js/main/tooltip.js"></script> -->
    <!-- <script src="../assets/js/ncr/populate-form-fields.js"></script> -->
</body>

</html>