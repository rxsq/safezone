<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CrossFire NCR</title>
    <!-- Bootstrap Icons link -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />
    <!-- Bootstrap link -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="../assets/css/style.css" />
  </head>

  <body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
      <div class="logo-content">
        <div class="logo">
          <a href="index.html">
            <img
              src="../assets/images/crossfire_logo_edited.png"
              alt="Logo for CrossFire Niagara"
            />
          </a>
        </div>
        <i class="bi bi-list" id="btn-close"></i>
      </div>
      <div class="notification-container">
        <button
          id="notificationBell"
          class="btn"
          data-bs-toggle="modal"
          data-bs-target="#notificationModal"
        >
          <i class="bi bi-bell"></i>
          <span id="notificationCount" class="badge bg-danger"></span>
        </button>
      </div>
      <ul class="nav-list">
        <li>
          <a href="index.html" data-bs-toggle="tooltip" title="Dashboard">
            <i class="bi bi-speedometer2"></i>
            <span class="links-name">Dashboard</span>
          </a>
        </li>
        <li id="create-ncr-nav" style="display: none">
          <a
            href="non-conformance-report.html"
            data-bs-toggle="tooltip"
            title="Create NCR"
            id="createNCRLink"
          >
            <i class="bi bi-file-earmark-plus"></i>
            <span class="links-name">Create NCR</span>
          </a>
        </li>
        <li>
          <a href="ncr-log.html" data-bs-toggle="tooltip" title="NCR Log">
            <i class="bi bi-card-list"></i>
            <span class="links-name">NCR Log</span>
          </a>
        </li>
        <li>
          <a href="ncr-data.html" data-bs-toggle="tooltip" title="NCR Data">
            <i class="bi bi-bar-chart"></i>
            <span class="links-name">NCR Data</span>
          </a>
        </li>
        <li>
          <a href="product.html" data-bs-toggle="tooltip" title="Products">
            <i class="bi bi-box-seam"></i>
            <span class="links-name">Products</span>
          </a>
        </li>
        <li id="employees-nav" style="display: none">
          <a href="Employee.html" data-bs-toggle="tooltip" title="Employees">
            <i class="bi bi-people"></i>
            <span class="links-name">Employees</span>
          </a>
        </li>
        <li>
          <a href="supplier.html" data-bs-toggle="tooltip" title="Supplier">
            <i class="bi bi-truck"></i>
            <span class="links-name">Suppliers</span>
          </a>
        </li>
      </ul>
      <div class="profile-content">
        <div class="profile">
          <div class="profile-details">
            <img
              src="/assets/images/crossfire_logo.PNG"
              alt="Logo for CrossFire Niagara"
            />
            <div class="name-job">
              <div class="name">CrossFire Niagara</div>
              <div class="job">Admin</div>
            </div>
          </div>
          <i class="bi bi-box-arrow-left" id="log-out"></i>
        </div>
      </div>
    </div>

    <div class="home-content">
      <div>
        <!-- Header -->
        <header>
          <h1>Non-Conformance Report Data</h1>
          <div class="actions">
            <button
              class="new-ncr-btn"
              onclick="location.href='non-conformance-report.html'"
              style="display: none"
            >
              + New NCR
            </button>
            <button
              class="back-to-dashboard-btn"
              onclick="window.location.href='index.html'"
            >
              Back to Dashboard
            </button>
          </div>
        </header>

        <!-- Key Metrics -->
        <section class="key-metrics">
          <div class="metric-card">
            <h2>Total</h2>
            <a href="#">
              <p id="metricTotal">0</p>
            </a>
          </div>
          <div class="metric-card">
            <h2>Open</h2>
            <a href="#">
              <p id="metricActive">0</p>
            </a>
          </div>
          <div class="metric-card">
            <h2>Closed</h2>
            <a href="#">
              <p id="metricInactive">0</p>
            </a>
          </div>
        </section>

        <!-- NCR Charts -->
        <!-- Year Month Chart -->
        <section class="ncr-trends">
          <h2>NCR's Per Year-Month</h2>
          <div class="chart">
            <canvas id="issueDateChart"></canvas>
          </div>
        </section>

        <!-- Supplier Chart -->
        <section class="ncr-trends">
          <h2>NCR's per Supplier</h2>
          <div class="chart">
            <canvas id="supplierChart"></canvas>
          </div>
        </section>

        <!-- Stage Chart -->
        <section class="ncr-trends">
          <h2>NCR's per Stage</h2>
          <div class="chart">
            <canvas id="stageChart"></canvas>
          </div>
        </section>

        <!-- Product Chart -->
        <section class="ncr-trends">
          <h2>NCR's per Product</h2>
          <div class="chart">
            <canvas id="productChart"></canvas>
          </div>
        </section>

        <!-- Product Category Chart -->
        <section class="ncr-trends">
          <h2>NCR's per Product Category</h2>
          <div class="chart">
            <canvas id="productCategoryChart"></canvas>
          </div>
        </section>

        <!-- Issue Date Chart -->
        <section class="ncr-trends">
          <h2>NCR's per Issue Date</h2>
          <div class="chart">
            <canvas id="dailyIssueDateChart"></canvas>
          </div>
        </section>

        <!-- NCR by Department Chart -->
        <section class="ncr-trends">
          <h2>NCR's per Department</h2>
          <div class="chart">
            <canvas id="departmentChart"></canvas>
          </div>
        </section>

        <!-- End NCR Charts -->
      </div>
    </div>

    <!-- Scripts -->
    <script src="../assets/js/main/chart.js"></script>
    <script src="../assets/js/main/sidebar.js"></script>
    <script src="../assets/js/ncr-data/handle-data.js"></script>
    <script src="../assets/js/main/user-role-handling.js"></script>
    <script src="../assets/js/main/tooltip.js"></script>
    <script defer src="../assets/js/ncr/populate-form-fields.js"></script>
    <script src="../assets/js/main/inject-notification-modal.js"></script>
    <script src="../assets/js/main/notification-handling.js"></script>
  </body>
</html>
